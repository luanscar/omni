{"openapi":"3.0.0","paths":{"/users":{"post":{"operationId":"UsersController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"Usu치rio criado com sucesso.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"description":"Dados inv치lidos."},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido ou limite de usu치rios do plano atingido."}},"security":[{"bearer":[]}],"summary":"Criar um novo usu치rio","tags":["Users"]},"get":{"operationId":"UsersController_findAll","parameters":[],"responses":{"200":{"description":"Lista de usu치rios retornada com sucesso.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}},"401":{"description":"N칚o autorizado."}},"security":[{"bearer":[]}],"summary":"Listar todos os usu치rios","tags":["Users"]}},"/users/{id}":{"get":{"operationId":"UsersController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Usu치rio encontrado.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"401":{"description":"N칚o autorizado."},"404":{"description":"Usu치rio n칚o encontrado."}},"security":[{"bearer":[]}],"summary":"Buscar um usu치rio pelo ID","tags":["Users"]},"patch":{"operationId":"UsersController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDto"}}}},"responses":{"200":{"description":"Usu치rio atualizado com sucesso.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"description":"Dados inv치lidos."},"401":{"description":"N칚o autorizado."},"404":{"description":"Usu치rio n칚o encontrado."}},"security":[{"bearer":[]}],"summary":"Atualizar um usu치rio","tags":["Users"]},"delete":{"operationId":"UsersController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Usu치rio removido com sucesso."},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."},"404":{"description":"Usu치rio n칚o encontrado."}},"security":[{"bearer":[]}],"summary":"Remover um usu치rio","tags":["Users"]}},"/tenants":{"post":{"operationId":"TenantsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTenantDto"}}}},"responses":{"201":{"description":"Tenant criado com sucesso.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tenant"}}}},"400":{"description":"Dados inv치lidos."},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."}},"security":[{"bearer":[]}],"summary":"Criar um novo Tenant (Empresa)","tags":["Tenants"]},"get":{"operationId":"TenantsController_findAll","parameters":[],"responses":{"200":{"description":"Lista de Tenants retornada com sucesso.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Tenant"}}}}},"401":{"description":"N칚o autorizado."}},"security":[{"bearer":[]}],"summary":"Listar todos os Tenants","tags":["Tenants"]}},"/tenants/{id}":{"get":{"operationId":"TenantsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Tenant encontrado.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tenant"}}}},"401":{"description":"N칚o autorizado."},"404":{"description":"Tenant n칚o encontrado."}},"security":[{"bearer":[]}],"summary":"Buscar um Tenant pelo ID","tags":["Tenants"]},"patch":{"operationId":"TenantsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateTenantDto"}}}},"responses":{"200":{"description":"Tenant atualizado com sucesso.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tenant"}}}},"400":{"description":"Dados inv치lidos."},"401":{"description":"N칚o autorizado."},"404":{"description":"Tenant n칚o encontrado."}},"security":[{"bearer":[]}],"summary":"Atualizar um Tenant","tags":["Tenants"]},"delete":{"operationId":"TenantsController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Tenant removido com sucesso."},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido - Apenas ADMIN ou MANAGER."},"404":{"description":"Tenant n칚o encontrado."}},"security":[{"bearer":[]}],"summary":"Remover um Tenant","tags":["Tenants"]}},"/auth/login":{"post":{"operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"200":{"description":"Login realizado com sucesso."},"401":{"description":"Credenciais inv치lidas ou n칚o autorizado."}},"security":[{"bearer":[]}],"summary":"Realizar login","tags":["Auth"]}},"/audit/logs":{"get":{"operationId":"AuditController_getLogs","parameters":[{"name":"eventType","required":false,"in":"query","schema":{"enum":["MESSAGE","USER_ACTION","SYSTEM_EVENT","MEDIA_DOWNLOAD","AUTH","DATA_CHANGE","ERROR"],"type":"string"}},{"name":"module","required":false,"in":"query","schema":{"type":"string"}},{"name":"status","required":false,"in":"query","schema":{"enum":["SUCCESS","FAILED","PARTIAL","PENDING"],"type":"string"}},{"name":"startDate","required":false,"in":"query","schema":{"type":"string"}},{"name":"endDate","required":false,"in":"query","schema":{"type":"string"}},{"name":"limit","required":false,"in":"query","schema":{"type":"number"}},{"name":"offset","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"Lista de logs retornada com sucesso.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AuditLog"}}}}},"401":{"description":"N칚o autorizado."},"403":{"description":"Sem permiss칚o."}},"security":[{"bearer":[]}],"summary":"Listar logs de auditoria","tags":["Audit"]}},"/audit/stats":{"get":{"operationId":"AuditController_getStats","parameters":[{"name":"startDate","required":true,"in":"query","schema":{"type":"string"}},{"name":"endDate","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Estat칤sticas retornadas com sucesso."},"401":{"description":"N칚o autorizado."},"403":{"description":"Sem permiss칚o."}},"security":[{"bearer":[]}],"summary":"Estat칤sticas de auditoria","tags":["Audit"]}},"/audit/logs/{id}":{"get":{"operationId":"AuditController_getLogDetails","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Detalhes do log retornados.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuditLog"}}}},"401":{"description":"N칚o autorizado."},"403":{"description":"Sem permiss칚o."},"404":{"description":"Log n칚o encontrado."}},"security":[{"bearer":[]}],"summary":"Buscar um log espec칤fico pelo ID","tags":["Audit"]}},"/channels":{"post":{"operationId":"ChannelsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateChannelDto"}}}},"responses":{"201":{"description":"Canal criado com sucesso.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Channel"}}}},"400":{"description":"Dados inv치lidos."},"401":{"description":"N칚o autorizado."},"403":{"description":"Limite de canais do plano atingido ou assinatura inativa."}},"security":[{"bearer":[]}],"summary":"Criar um novo canal de comunica칞칚o","tags":["Channels"]},"get":{"operationId":"ChannelsController_findAll","parameters":[],"responses":{"200":{"description":"Lista de canais retornada com sucesso.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Channel"}}}}},"401":{"description":"N칚o autorizado."}},"security":[{"bearer":[]}],"summary":"Listar todos os canais da sua empresa","tags":["Channels"]}},"/channels/{id}":{"get":{"operationId":"ChannelsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Canal encontrado.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Channel"}}}},"401":{"description":"N칚o autorizado."},"404":{"description":"Canal n칚o encontrado."}},"security":[{"bearer":[]}],"summary":"Buscar detalhes de um canal espec칤fico","tags":["Channels"]},"patch":{"operationId":"ChannelsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateChannelDto"}}}},"responses":{"200":{"description":"Canal atualizado com sucesso.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Channel"}}}},"401":{"description":"N칚o autorizado."},"404":{"description":"Canal n칚o encontrado."}},"security":[{"bearer":[]}],"summary":"Atualizar configura칞칫es do canal","tags":["Channels"]},"delete":{"operationId":"ChannelsController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Canal removido com sucesso."},"401":{"description":"N칚o autorizado."},"404":{"description":"Canal n칚o encontrado."}},"security":[{"bearer":[]}],"summary":"Remover um canal","tags":["Channels"]}},"/whatsapp/{channelId}/start":{"post":{"operationId":"WhatsappController_startSession","parameters":[{"name":"channelId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":"Sess칚o iniciada (QR Code gerado ou status retornado)."},"401":{"description":"N칚o autorizado."},"404":{"description":"Canal n칚o encontrado."}},"security":[{"bearer":[]}],"summary":"Inicia uma sess칚o e gera o QR Code","tags":["Whatsapp"]}},"/whatsapp/{channelId}/qr":{"get":{"operationId":"WhatsappController_getQrImage","parameters":[{"name":"channelId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Imagem do QR Code renderizada.","content":{"image/png":{"schema":{"type":"string","format":"binary"}}}},"401":{"description":"N칚o autorizado."},"404":{"description":"QR Code n칚o dispon칤vel ou sess칚o conectada."}},"security":[{"bearer":[]}],"summary":"Renderiza a imagem do QR Code (PNG)","tags":["Whatsapp"]}},"/whatsapp/{channelId}/status":{"get":{"operationId":"WhatsappController_getStatus","parameters":[{"name":"channelId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Status retornado com sucesso."},"401":{"description":"N칚o autorizado."},"404":{"description":"Canal n칚o encontrado."}},"security":[{"bearer":[]}],"summary":"Retorna o status da conex칚o e o QR Code (se houver)","tags":["Whatsapp"]}},"/whatsapp/{channelId}/logout":{"post":{"operationId":"WhatsappController_logout","parameters":[{"name":"channelId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":"Sess칚o encerrada com sucesso."},"401":{"description":"N칚o autorizado."},"404":{"description":"Canal n칚o encontrado."}},"security":[{"bearer":[]}],"summary":"Desconecta e limpa a sess칚o","tags":["Whatsapp"]}},"/storage/upload":{"post":{"description":"\nFaz upload de um arquivo para uso em mensagens.\n\n**Tipos suportados:**\n- Imagens: JPG, PNG, GIF, WEBP\n- V칤deos: MP4, AVI, MOV\n- 츼udios: MP3, OGG, WAV\n- Documentos: PDF, DOC, DOCX, XLS, XLSX\n- Outros: ZIP, RAR, etc.\n\n**Resposta de sucesso:**\n```json\n{\n  \"id\": \"abc-123-def-456\",\n  \"fileName\": \"arquivo_123456789.jpg\",\n  \"originalName\": \"foto.jpg\",\n  \"mimeType\": \"image/jpeg\",\n  \"size\": 245678,\n  \"publicUrl\": \"/storage/abc-123-def-456/download\"\n}\n```\n\n**Como usar:**\n1. Fa칞a upload do arquivo aqui\n2. Copie o \"id\" retornado\n3. Use como \"mediaId\" ao enviar mensagem\n    ","operationId":"StorageController_upload","parameters":[{"name":"category","required":true,"in":"query","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary","description":"Arquivo a ser enviado"}}}}}},"responses":{"201":{"description":"Arquivo enviado com sucesso. Retorna objeto Media com id, fileName, size, etc."},"400":{"description":"Arquivo inv치lido ou muito grande."},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."}},"security":[{"bearer":[]}],"summary":"Upload de arquivo (imagens, v칤deos, documentos)","tags":["Storage"]}},"/storage/upload/batch":{"post":{"description":"\nFaz upload de m칰ltiplos arquivos de uma vez.\n\n**Resposta de sucesso:**\n```json\n[\n  {\n    \"id\": \"abc-123\",\n    \"fileName\": \"arquivo1.jpg\",\n    \"mimeType\": \"image/jpeg\",\n    \"size\": 245678\n  },\n  {\n    \"id\": \"def-456\",\n    \"fileName\": \"arquivo2.pdf\",\n    \"mimeType\": \"application/pdf\",\n    \"size\": 123456\n  }\n]\n```\n\n**Como usar:**\n1. Envie m칰ltiplos arquivos no campo \"files\"\n2. Receba array com todos os mediaIds\n3. Use os IDs para enviar m칰ltiplas mensagens\n    ","operationId":"StorageController_uploadBatch","parameters":[{"name":"category","required":true,"in":"query","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"files":{"type":"array","items":{"type":"string","format":"binary"},"description":"M칰ltiplos arquivos"}}}}}},"responses":{"201":{"description":"Arquivos enviados com sucesso. Retorna array de objetos Media."},"400":{"description":"Um ou mais arquivos inv치lidos."},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."}},"security":[{"bearer":[]}],"summary":"Upload de m칰ltiplos arquivos","tags":["Storage"]}},"/storage":{"get":{"description":"Retorna lista de todos os arquivos enviados pelo seu tenant, ordenados por data de upload (mais recentes primeiro).","operationId":"StorageController_findAll","parameters":[],"responses":{"200":{"description":"Lista de arquivos com id, fileName, size, mimeType, createdAt, etc."},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."}},"security":[{"bearer":[]}],"summary":"Listar todos os arquivos","tags":["Storage"]}},"/storage/{id}/download":{"get":{"description":"\nGera URL assinada tempor치ria para download ou visualiza칞칚o do arquivo.\n\n**Exemplo de resposta:**\n```json\n{\n  \"url\": \"https://storage.example.com/abc-123.jpg?token=...\",\n  \"fileName\": \"foto.jpg\",\n  \"mimeType\": \"image/jpeg\",\n  \"originalName\": \"minha_foto.jpg\"\n}\n```\n\nA URL 칠 v치lida por tempo limitado (presigned URL).\n    ","operationId":"StorageController_getDownloadUrl","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"URL gerada com sucesso."},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."},"404":{"description":"Arquivo n칚o encontrado."}},"security":[{"bearer":[]}],"summary":"Obter URL de download","tags":["Storage"]}},"/storage/{id}":{"delete":{"description":"丘멆잺 **ATEN칂츾O:** Esta a칞칚o 칠 irrevers칤vel! O arquivo ser치 removido permanentemente do storage e do banco de dados.","operationId":"StorageController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Arquivo removido com sucesso."},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido - Apenas ADMIN e MANAGER."},"404":{"description":"Arquivo n칚o encontrado."}},"security":[{"bearer":[]}],"summary":"Remover arquivo permanentemente","tags":["Storage"]}},"/teams":{"post":{"operationId":"TeamsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTeamDto"}}}},"responses":{"201":{"description":"Equipe criada com sucesso.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Team"}}}},"400":{"description":"Dados inv치lidos."},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."}},"security":[{"bearer":[]}],"summary":"Criar uma nova equipe","tags":["Teams"]},"get":{"operationId":"TeamsController_findAll","parameters":[],"responses":{"200":{"description":"Lista de equipes retornada com sucesso.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Team"}}}}},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."}},"security":[{"bearer":[]}],"summary":"Listar todas as equipes","tags":["Teams"]}},"/teams/{id}":{"get":{"operationId":"TeamsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Equipe encontrada.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Team"}}}},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."},"404":{"description":"Equipe n칚o encontrada."}},"security":[{"bearer":[]}],"summary":"Buscar detalhes de uma equipe","tags":["Teams"]},"patch":{"operationId":"TeamsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateTeamDto"}}}},"responses":{"200":{"description":"Equipe atualizada com sucesso.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Team"}}}},"401":{"description":"N칚o autorizado."},"403":{"description":"Sem permiss칚o."},"404":{"description":"Equipe n칚o encontrada."}},"security":[{"bearer":[]}],"summary":"Atualizar equipe","tags":["Teams"]},"delete":{"operationId":"TeamsController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Equipe removida com sucesso."},"401":{"description":"N칚o autorizado."},"403":{"description":"Sem permiss칚o."},"404":{"description":"Equipe n칚o encontrada."}},"security":[{"bearer":[]}],"summary":"Remover uma equipe","tags":["Teams"]}},"/teams/{id}/members":{"post":{"operationId":"TeamsController_addMember","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddMemberDto"}}}},"responses":{"201":{"description":"Membro adicionado/atualizado com sucesso."},"401":{"description":"N칚o autorizado."},"403":{"description":"Sem permiss칚o."},"404":{"description":"Equipe ou usu치rio n칚o encontrados."}},"security":[{"bearer":[]}],"summary":"Adicionar ou atualizar membro da equipe","tags":["Teams"]}},"/teams/{id}/members/{userId}":{"delete":{"operationId":"TeamsController_removeMember","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Membro removido com sucesso."},"401":{"description":"N칚o autorizado."},"403":{"description":"Sem permiss칚o."},"404":{"description":"Membro n칚o encontrado no time."}},"security":[{"bearer":[]}],"summary":"Remover usu치rio da equipe","tags":["Teams"]}},"/contacts":{"post":{"operationId":"ContactsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateContactDto"}}}},"responses":{"201":{"description":"Contato criado com sucesso.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Contact"}}}},"400":{"description":"Dados inv치lidos."},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."}},"security":[{"bearer":[]}],"summary":"Criar um novo contato","tags":["Contacts"]},"get":{"operationId":"ContactsController_findAll","parameters":[],"responses":{"200":{"description":"Lista de contatos retornada com sucesso.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Contact"}}}}},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."}},"security":[{"bearer":[]}],"summary":"Listar todos os contatos","tags":["Contacts"]}},"/contacts/{id}":{"get":{"operationId":"ContactsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Contato encontrado.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Contact"}}}},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."},"404":{"description":"Contato n칚o encontrado."}},"security":[{"bearer":[]}],"summary":"Detalhes de um contato","tags":["Contacts"]},"patch":{"operationId":"ContactsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateContactDto"}}}},"responses":{"200":{"description":"Contato atualizado com sucesso.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Contact"}}}},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."},"404":{"description":"Contato n칚o encontrado."}},"security":[{"bearer":[]}],"summary":"Atualizar contato","tags":["Contacts"]},"delete":{"operationId":"ContactsController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Contato removido com sucesso."},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."},"404":{"description":"Contato n칚o encontrado."}},"security":[{"bearer":[]}],"summary":"Remover um contato","tags":["Contacts"]}},"/conversations":{"post":{"description":"Inicia conversa de atendimento (com contactId e channelId) ou chat interno (com teamId). Se j치 existir conversa aberta para o contato, retorna a existente.","operationId":"ConversationsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateConversationDto"}}}},"responses":{"201":{"description":"Conversa criada ou recuperada.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Conversation"}}}},"400":{"description":"Falta contactId/teamId ou ambos foram fornecidos."},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."}},"security":[{"bearer":[]}],"summary":"Criar nova conversa","tags":["Conversations"]},"get":{"description":"Lista conversas ordenadas por atualiza칞칚o. Inclui 칰ltima mensagem, contato, agente atribu칤do e contador de mensagens.","operationId":"ConversationsController_findAll","parameters":[{"name":"status","required":false,"in":"query","description":"Filtrar por status: OPEN, PENDING ou CLOSED","schema":{"enum":["OPEN","CLOSED","PENDING"],"type":"string"}}],"responses":{"200":{"description":"Lista com 칰ltima mensagem, contato, agente e contador.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Conversation"}}}}},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."}},"security":[{"bearer":[]}],"summary":"Listar conversas","tags":["Conversations"]}},"/conversations/{id}":{"get":{"operationId":"ConversationsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Detalhes encontrados.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Conversation"}}}},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."},"404":{"description":"Conversa n칚o encontrada."}},"security":[{"bearer":[]}],"summary":"Detalhes da conversa","tags":["Conversations"]},"patch":{"description":"Altera status (OPEN/PENDING/CLOSED) ou transfere para outro agente (assigneeId).","operationId":"ConversationsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateConversationDto"}}}},"responses":{"200":{"description":"Conversa atualizada.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Conversation"}}}},"400":{"description":"Dados inv치lidos."},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."},"404":{"description":"Conversa n칚o encontrada."}},"security":[{"bearer":[]}],"summary":"Atualizar conversa","tags":["Conversations"]}},"/messages":{"post":{"description":"\n**Tipos de mensagens suportadas:**\n\n**1. TEXTO**\n```json\n{\n  \"conversationId\": \"uuid\",\n  \"type\": \"TEXT\",\n  \"content\": \"Ol치!\",\n  \"signMessage\": false\n}\n```\n\n**2. IMAGEM** (primeiro fa칞a upload em /storage/upload)\n```json\n{\n  \"conversationId\": \"uuid\",\n  \"type\": \"IMAGE\",\n  \"mediaId\": \"uuid-do-upload\",\n  \"content\": \"Legenda opcional\"\n}\n```\n\n**3. V칈DEO/츼UDIO/DOCUMENTO/STICKER** (mesmo fluxo da imagem)\n```json\n{\n  \"conversationId\": \"uuid\",\n  \"type\": \"VIDEO\",  // ou AUDIO, DOCUMENT, STICKER\n  \"mediaId\": \"uuid-do-upload\",\n  \"content\": \"Legenda ou nome do arquivo (opcional)\"\n}\n```\n\n**4. REA칂츾O**\n```json\n{\n  \"conversationId\": \"uuid\",\n  \"type\": \"REACTION\",\n  \"reaction\": {\n    \"text\": \"仇벒잺\",\n    \"key\": \"uuid-da-mensagem-alvo\"\n  }\n}\n```\n\n**5. RESPONDER MENSAGEM** (adicione replyToId)\n```json\n{\n  \"conversationId\": \"uuid\",\n  \"type\": \"TEXT\",\n  \"content\": \"Esta 칠 uma resposta\",\n  \"replyToId\": \"uuid-da-mensagem-original\"\n}\n```\n\n**6. ASSINAR MENSAGEM** (adicione signMessage: true)\n```json\n{\n  \"conversationId\": \"uuid\",\n  \"type\": \"TEXT\",\n  \"content\": \"Mensagem assinada\",\n  \"signMessage\": true\n}\n```\nResultado: \"*Nome do Agente:*\\nMensagem assinada\"\n    ","operationId":"MessagesController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateMessageDto"}}}},"responses":{"201":{"description":"Mensagem salva e enfileirada para envio.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}},"400":{"description":"Dados inv치lidos ou m칤dia n칚o encontrada."},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."},"404":{"description":"Conversa n칚o encontrada."}},"security":[{"bearer":[]}],"summary":"Enviar uma mensagem","tags":["Messages"]}},"/messages/batch":{"post":{"description":"\nEnvia m칰ltiplas mensagens de uma vez (칰til para 치lbuns de fotos).\n\n**Exemplo: Enviar 3 fotos**\n```json\n{\n  \"conversationId\": \"uuid\",\n  \"messages\": [\n    {\n      \"type\": \"IMAGE\",\n      \"mediaId\": \"abc-123\",\n      \"content\": \"Foto 1\"\n    },\n    {\n      \"type\": \"IMAGE\",\n      \"mediaId\": \"def-456\",\n      \"content\": \"Foto 2\"\n    },\n    {\n      \"type\": \"IMAGE\",\n      \"mediaId\": \"ghi-789\",\n      \"content\": \"Foto 3\"\n    }\n  ]\n}\n```\n\n**Fluxo completo:**\n1. Upload m칰ltiplos arquivos: POST /storage/upload/batch\n2. Enviar m칰ltiplas mensagens: POST /messages/batch\n    ","operationId":"MessagesController_createBatch","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchMessageDto"}}}},"responses":{"201":{"description":"Mensagens enviadas com sucesso. Retorna array de mensagens.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Message"}}}}},"400":{"description":"Dados inv치lidos."},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."},"404":{"description":"Conversa n칚o encontrada."}},"security":[{"bearer":[]}],"summary":"Enviar m칰ltiplas mensagens","tags":["Messages"]}},"/messages/conversation/{conversationId}":{"get":{"operationId":"MessagesController_findByConversation","parameters":[{"name":"conversationId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Hist칩rico retornado com sucesso.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Message"}}}}},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."},"404":{"description":"Conversa n칚o encontrada."}},"security":[{"bearer":[]}],"summary":"Listar hist칩rico de mensagens","tags":["Messages"]}},"/messages/forward":{"post":{"operationId":"MessagesController_forwardMessage","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForwardMessageDto"}}}},"responses":{"201":{"description":"Mensagem encaminhada com sucesso."},"401":{"description":"N칚o autorizado."},"404":{"description":"Mensagem original n칚o encontrada."}},"security":[{"bearer":[]}],"summary":"Encaminhar mensagem","tags":["Messages"]}},"/messages/forward/batch":{"post":{"operationId":"MessagesController_forwardBatch","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForwardBatchDto"}}}},"responses":{"201":{"description":"Mensagens encaminhadas com sucesso."},"401":{"description":"N칚o autorizado."}},"security":[{"bearer":[]}],"summary":"Encaminhar m칰ltiplas mensagens","tags":["Messages"]}},"/plans":{"post":{"operationId":"PlansController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePlanDto"}}}},"responses":{"201":{"description":"Plano criado com sucesso.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionPlan"}}}},"400":{"description":"Dados inv치lidos."},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."},"409":{"description":"J치 existe um plano deste tipo."}},"security":[{"bearer":[]}],"summary":"Criar um novo plano","tags":["Plans"]},"get":{"operationId":"PlansController_findAll","parameters":[],"responses":{"200":{"description":"Lista de planos retornada com sucesso.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SubscriptionPlan"}}}}},"401":{"description":"N칚o autorizado."}},"security":[{"bearer":[]}],"summary":"Listar todos os planos","tags":["Plans"]}},"/plans/{id}":{"get":{"operationId":"PlansController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Plano encontrado.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionPlan"}}}},"401":{"description":"N칚o autorizado."},"404":{"description":"Plano n칚o encontrado."}},"security":[{"bearer":[]}],"summary":"Buscar um plano pelo ID","tags":["Plans"]},"patch":{"operationId":"PlansController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePlanDto"}}}},"responses":{"200":{"description":"Plano atualizado com sucesso.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionPlan"}}}},"400":{"description":"Dados inv치lidos."},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."},"404":{"description":"Plano n칚o encontrado."}},"security":[{"bearer":[]}],"summary":"Atualizar um plano","tags":["Plans"]},"delete":{"operationId":"PlansController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Plano removido com sucesso."},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."},"404":{"description":"Plano n칚o encontrado."}},"security":[{"bearer":[]}],"summary":"Remover um plano","tags":["Plans"]}},"/subscriptions/checkout":{"post":{"operationId":"SubscriptionsController_createCheckout","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCheckoutSessionDto"}}}},"responses":{"201":{"description":"Sess칚o de checkout criada com sucesso."},"400":{"description":"Dados inv치lidos."},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."}},"security":[{"bearer":[]}],"summary":"Criar uma sess칚o de checkout","tags":["Subscriptions"]}},"/subscriptions/my-subscription":{"get":{"operationId":"SubscriptionsController_findMySubscription","parameters":[],"responses":{"200":{"description":"Assinatura encontrada.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Subscription"}}}},"401":{"description":"N칚o autorizado."},"404":{"description":"Assinatura n칚o encontrada."}},"security":[{"bearer":[]}],"summary":"Buscar assinatura do tenant","tags":["Subscriptions"]}},"/subscriptions/cancel":{"delete":{"operationId":"SubscriptionsController_cancel","parameters":[],"responses":{"200":{"description":"Assinatura cancelada com sucesso."},"401":{"description":"N칚o autorizado."},"403":{"description":"Proibido."},"404":{"description":"Assinatura n칚o encontrada."}},"security":[{"bearer":[]}],"summary":"Cancelar assinatura","tags":["Subscriptions"]}},"/webhooks/stripe":{"post":{"operationId":"StripeWebhookController_handleWebhook","parameters":[{"name":"stripe-signature","required":true,"in":"header","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"tags":["StripeWebhook"]}}},"info":{"title":"Omni SaaS API","description":"Documenta칞칚o da API do Omni SaaS","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"CreateUserDto":{"type":"object","properties":{"name":{"type":"string","example":"John Doe","description":"Nome do usu치rio"},"email":{"type":"string","example":"john.doe@example.com","description":"Email do usu치rio"},"password":{"type":"string","example":"123456","description":"Senha do usu치rio","minLength":6},"tenantId":{"type":"string","example":"uuid-do-tenant","description":"ID do Tenant (Empresa) ao qual o usu치rio pertence"}},"required":["name","email","password","tenantId"]},"User":{"type":"object","properties":{"id":{"type":"string","example":"fa4c178f-6595-40b9-a569-3d5c079288e5"},"name":{"type":"string","example":"Jo칚o Silva"},"email":{"type":"string","example":"joao@empresa.com"},"active":{"type":"boolean","example":true},"avatarUrl":{"type":"string","example":"https://avatar.url/image.png"},"role":{"type":"string","enum":["ADMIN","AGENT","MANAGER"],"example":"AGENT"},"createdAt":{"format":"date-time","type":"string","example":"2025-12-20T02:40:14.742Z"},"updatedAt":{"format":"date-time","type":"string","example":"2025-12-20T02:40:14.742Z"}},"required":["id","name","email","active","role","createdAt","updatedAt"]},"UpdateUserDto":{"type":"object","properties":{"name":{"type":"string","example":"John Doe","description":"Nome do usu치rio"},"email":{"type":"string","example":"john.doe@example.com","description":"Email do usu치rio"},"password":{"type":"string","example":"123456","description":"Senha do usu치rio","minLength":6},"tenantId":{"type":"string","example":"uuid-do-tenant","description":"ID do Tenant (Empresa) ao qual o usu치rio pertence"}}},"CreateTenantDto":{"type":"object","properties":{"name":{"type":"string","example":"Minha Empresa","description":"Nome da empresa (Tenant)"},"slug":{"type":"string","example":"minha-empresa","description":"Slug identificador da empresa"}},"required":["name","slug"]},"Tenant":{"type":"object","properties":{"id":{"type":"string","example":"fa4c178f-6595-40b9-a569-3d5c079288e5"},"name":{"type":"string","example":"Minha Empresa"},"slug":{"type":"string","example":"minha-empresa"},"active":{"type":"boolean","example":true},"createdAt":{"format":"date-time","type":"string","example":"2025-12-20T02:40:14.742Z"},"updatedAt":{"format":"date-time","type":"string","example":"2025-12-20T02:40:14.742Z"}},"required":["id","name","slug","active","createdAt","updatedAt"]},"UpdateTenantDto":{"type":"object","properties":{"name":{"type":"string","example":"Minha Empresa","description":"Nome da empresa (Tenant)"},"slug":{"type":"string","example":"minha-empresa","description":"Slug identificador da empresa"}}},"LoginDto":{"type":"object","properties":{"email":{"type":"string","example":"admin@omni.com","description":"Email do usu치rio"},"password":{"type":"string","example":"admin123","description":"Senha do usu치rio","minLength":6}},"required":["email","password"]},"AuditLog":{"type":"object","properties":{"id":{"type":"string","example":"fa4c178f-6595-40b9-a569-3d5c079288e5"},"tenantId":{"type":"string","example":"tenant-uuid-here"},"userId":{"type":"string","example":"user-uuid-here","description":"ID do usu치rio que executou a a칞칚o"},"eventType":{"type":"string","enum":["MESSAGE","USER_ACTION","SYSTEM_EVENT","MEDIA_DOWNLOAD","AUTH","DATA_CHANGE","ERROR"],"example":"MESSAGE","description":"Tipo do evento auditado"},"module":{"type":"string","example":"whatsapp","description":"M칩dulo onde o evento ocorreu"},"action":{"type":"string","example":"message.sent","description":"A칞칚o executada"},"resource":{"type":"string","example":"msg-uuid-here","description":"ID do recurso afetado"},"details":{"type":"object","example":{"to":"5579000000000","type":"TEXT","hasMedia":false},"description":"Detalhes adicionais do evento"},"status":{"type":"string","enum":["SUCCESS","FAILED","PARTIAL","PENDING"],"example":"SUCCESS","description":"Status da opera칞칚o"},"errorMessage":{"type":"string","example":"Error message here","description":"Mensagem de erro (se falhou)"},"ipAddress":{"type":"string","example":"192.168.1.100","description":"Endere칞o IP de origem"},"userAgent":{"type":"string","example":"Mozilla/5.0...","description":"User agent do navegador/cliente"},"createdAt":{"format":"date-time","type":"string","example":"2025-12-22T01:00:00.000Z"}},"required":["id","tenantId","eventType","module","action","details","status","createdAt"]},"CreateChannelDto":{"type":"object","properties":{"name":{"type":"string","description":"Nome amig치vel para identificar o canal","example":"WhatsApp Vendas"},"type":{"type":"string","enum":["WHATSAPP","INSTAGRAM","TELEGRAM","WEBCHAT"],"description":"Tipo do canal"},"identifier":{"type":"string","description":"Identificador externo (n칰mero do telefone, ID da p치gina, etc)"},"token":{"type":"string","description":"Token de API externa (Meta Cloud API, etc)"}},"required":["name","type"]},"Channel":{"type":"object","properties":{"id":{"type":"string","example":"fa49178f-6595-40b9-a569-3d5c079288e5"},"name":{"type":"string","example":"Suporte Whatsapp"},"type":{"type":"string","enum":["WHATSAPP","INSTAGRAM","TELEGRAM","WEBCHAT"],"example":"WHATSAPP"},"identifier":{"type":"string","example":"5511999999999"},"active":{"type":"boolean","example":true},"tenantId":{"type":"string","example":"fa4c178f-6595-40b9-a569-3d5c079288e5"},"createdAt":{"format":"date-time","type":"string","example":"2025-12-20T02:40:14.742Z"},"updatedAt":{"format":"date-time","type":"string","example":"2025-12-20T02:40:14.742Z"}},"required":["id","name","type","active","tenantId","createdAt","updatedAt"]},"UpdateChannelDto":{"type":"object","properties":{"name":{"type":"string","description":"Nome amig치vel para identificar o canal","example":"WhatsApp Vendas"},"type":{"type":"string","enum":["WHATSAPP","INSTAGRAM","TELEGRAM","WEBCHAT"],"description":"Tipo do canal"},"identifier":{"type":"string","description":"Identificador externo (n칰mero do telefone, ID da p치gina, etc)"},"token":{"type":"string","description":"Token de API externa (Meta Cloud API, etc)"}}},"CreateTeamDto":{"type":"object","properties":{"name":{"type":"string","example":"Suporte T칠cnico","description":"Nome da equipe"},"description":{"type":"string","example":"Equipe respons치vel pelo N칤vel 1","description":"Descri칞칚o da equipe"},"memberIds":{"example":["uuid-do-usuario-1","uuid-do-usuario-2"],"description":"Lista de IDs dos usu치rios que far칚o parte desta equipe","type":"array","items":{"type":"string"}}},"required":["name"]},"TeamUser":{"type":"object","properties":{"id":{"type":"string","example":"fa4c178f-6595-40b9-a569-3d5c079288e5"},"name":{"type":"string","example":"Jo칚o Silva"},"avatarUrl":{"type":"string","example":"https://avatar.url/image.png"}},"required":["id","name"]},"TeamMember":{"type":"object","properties":{"id":{"type":"string","example":"fa49178f-6595-40b9-a569-3d5c07920000"},"role":{"type":"string","enum":["ADMIN","MEMBER"],"example":"MEMBER"},"user":{"$ref":"#/components/schemas/TeamUser"}},"required":["id","role","user"]},"TeamCount":{"type":"object","properties":{"members":{"type":"number","example":3}},"required":["members"]},"Team":{"type":"object","properties":{"id":{"type":"string","example":"fa49178f-6595-40b9-a569-3d5c07927777"},"name":{"type":"string","example":"Vendas"},"description":{"type":"string","example":"Equipe comercial"},"tenantId":{"type":"string","example":"fa4c178f-6595-40b9-a569-3d5c079288e5"},"members":{"type":"array","items":{"$ref":"#/components/schemas/TeamMember"}},"_count":{"$ref":"#/components/schemas/TeamCount"},"createdAt":{"format":"date-time","type":"string","example":"2025-12-20T02:40:14.742Z"},"updatedAt":{"format":"date-time","type":"string","example":"2025-12-20T02:40:14.742Z"}},"required":["id","name","tenantId","createdAt","updatedAt"]},"UpdateTeamDto":{"type":"object","properties":{"name":{"type":"string","example":"Suporte T칠cnico","description":"Nome da equipe"},"description":{"type":"string","example":"Equipe respons치vel pelo N칤vel 1","description":"Descri칞칚o da equipe"},"memberIds":{"example":["uuid-do-usuario-1","uuid-do-usuario-2"],"description":"Lista de IDs dos usu치rios que far칚o parte desta equipe","type":"array","items":{"type":"string"}}}},"AddMemberDto":{"type":"object","properties":{"userId":{"type":"string","example":"uuid-do-usuario","description":"ID do usu치rio a ser adicionado ao time"},"role":{"type":"string","enum":["ADMIN","MEMBER"],"example":"MEMBER","description":"Papel do usu치rio no time","default":"MEMBER"}},"required":["userId","role"]},"CreateContactDto":{"type":"object","properties":{"name":{"type":"string","example":"Jo칚o da Silva","description":"Nome completo do contato"},"phoneNumber":{"type":"string","example":"5511999999999","description":"N칰mero de telefone no formato E.164 (DDI + DDD + N칰mero)"},"email":{"type":"string","example":"joao@email.com","description":"Endere칞o de email do contato"},"profilePicUrl":{"type":"string","example":"https://exemplo.com/foto.jpg","description":"URL da foto de perfil do contato"},"customFields":{"type":"object","example":{"cpf":"123.456.789-00","vip":true,"tags":["novo","lead"]},"description":"Objeto JSON livre para armazenar campos personalizados do contato"}},"required":["name"]},"Contact":{"type":"object","properties":{"id":{"type":"string","example":"fa49178f-6595-40b9-a569-3d5c07921234"},"name":{"type":"string","example":"Cliente Exemplo"},"phoneNumber":{"type":"string","example":"+5511998887766"},"email":{"type":"string","example":"cliente@email.com"},"profilePicUrl":{"type":"string","example":"https://avatar.url/contact.png"},"customFields":{"type":"object","example":{"origem":"site"}},"tenantId":{"type":"string","example":"fa4c178f-6595-40b9-a569-3d5c079288e5"},"createdAt":{"format":"date-time","type":"string","example":"2025-12-20T02:40:14.742Z"},"updatedAt":{"format":"date-time","type":"string","example":"2025-12-20T02:40:14.742Z"}},"required":["id","name","tenantId","createdAt","updatedAt"]},"UpdateContactDto":{"type":"object","properties":{"name":{"type":"string","example":"Jo칚o da Silva","description":"Nome completo do contato"},"phoneNumber":{"type":"string","example":"5511999999999","description":"N칰mero de telefone no formato E.164 (DDI + DDD + N칰mero)"},"email":{"type":"string","example":"joao@email.com","description":"Endere칞o de email do contato"},"profilePicUrl":{"type":"string","example":"https://exemplo.com/foto.jpg","description":"URL da foto de perfil do contato"},"customFields":{"type":"object","example":{"cpf":"123.456.789-00","vip":true,"tags":["novo","lead"]},"description":"Objeto JSON livre para armazenar campos personalizados do contato"}}},"CreateConversationDto":{"type":"object","properties":{"contactId":{"type":"string","example":"uuid-do-contato","description":"ID do contato (para atendimentos)"},"channelId":{"type":"string","example":"uuid-do-canal","description":"ID do canal de origem (WhatsApp, etc)"},"teamId":{"type":"string","example":"uuid-do-time","description":"ID do time (para chat interno)"}}},"ConversationContact":{"type":"object","properties":{"name":{"type":"string","example":"Luan Ara칰jo"},"profilePicUrl":{"type":"string","example":"/storage/abc-123/download"}},"required":["name"]},"ConversationAssignee":{"type":"object","properties":{"name":{"type":"string","example":"Jo칚o Silva"},"avatarUrl":{"type":"string","example":"https://avatar.url/image.png"}},"required":["name"]},"ConversationTeam":{"type":"object","properties":{"name":{"type":"string","example":"Vendas"}},"required":["name"]},"ConversationCount":{"type":"object","properties":{"messages":{"type":"number","example":5}},"required":["messages"]},"ConversationMedia":{"type":"object","properties":{"id":{"type":"string","example":"fa49178f-6595-40b9-a569-3d5c07925555"},"fileName":{"type":"string","example":"image.jpg"},"mimeType":{"type":"string","example":"image/jpeg"},"publicUrl":{"type":"string","example":"/storage/abc-123/download"}},"required":["id","fileName","mimeType"]},"ConversationMessageSender":{"type":"object","properties":{"name":{"type":"string","example":"Jo칚o Silva"}},"required":["name"]},"ConversationMessage":{"type":"object","properties":{"id":{"type":"string","example":"fa49178f-6595-40b9-a569-3d5c07925555"},"providerId":{"type":"string","example":"wamid.HBgLNTU3OTIxMDc1OTIyFQIAERgSNEQ0QzQzRkY5RTIwRjA5OEIzAA=="},"content":{"type":"string","example":"Ol치, como posso ajudar?"},"senderType":{"type":"string","enum":["USER","CONTACT","SYSTEM"],"example":"CONTACT"},"media":{"$ref":"#/components/schemas/ConversationMedia"},"senderContact":{"$ref":"#/components/schemas/ConversationMessageSender"},"senderUser":{"$ref":"#/components/schemas/ConversationMessageSender"},"read":{"type":"boolean","example":false},"createdAt":{"format":"date-time","type":"string","example":"2025-12-20T02:40:14.742Z"}},"required":["id","providerId","content","senderType","read","createdAt"]},"Conversation":{"type":"object","properties":{"id":{"type":"string","example":"fa49178f-6595-40b9-a569-3d5c07925555"},"sequenceId":{"type":"number","example":1},"tenantId":{"type":"string","example":"fa4c178f-6595-40b9-a569-3d5c079288e5"},"contactId":{"type":"string","example":"fa49178f-6595-40b9-a569-3d5c07921234"},"channelId":{"type":"string","example":"fa49178f-6595-40b9-a569-3d5c079288e5"},"teamId":{"type":"string","example":"fa49178f-6595-40b9-a569-3d5c07927777"},"assigneeId":{"type":"string","example":"fa4c178f-6595-40b9-a569-3d5c079288e5"},"status":{"type":"string","enum":["OPEN","CLOSED","PENDING"],"example":"OPEN"},"contact":{"$ref":"#/components/schemas/ConversationContact"},"assignee":{"$ref":"#/components/schemas/ConversationAssignee"},"team":{"$ref":"#/components/schemas/ConversationTeam"},"_count":{"$ref":"#/components/schemas/ConversationCount"},"messages":{"description":"Array com a 칰ltima mensagem da conversa","type":"array","items":{"$ref":"#/components/schemas/ConversationMessage"}},"createdAt":{"format":"date-time","type":"string","example":"2025-12-20T02:40:14.742Z"},"updatedAt":{"format":"date-time","type":"string","example":"2025-12-20T02:40:14.742Z"}},"required":["id","sequenceId","tenantId","status","_count","messages","createdAt","updatedAt"]},"UpdateConversationDto":{"type":"object","properties":{"status":{"type":"string","enum":["OPEN","CLOSED","PENDING"],"description":"Novo status da conversa"},"assigneeId":{"type":"string","example":"uuid-do-agente","description":"ID do agente respons치vel (transfer칡ncia)"}}},"LocationMessageDto":{"type":"object","properties":{"degreesLatitude":{"type":"number","example":-23.55052,"description":"Latitude em graus decimais (ex: -23.550520 para S칚o Paulo)"},"degreesLongitude":{"type":"number","example":-46.633308,"description":"Longitude em graus decimais (ex: -46.633308 para S칚o Paulo)"},"name":{"type":"string","example":"Avenida Paulista","description":"Nome do local (opcional)"},"address":{"type":"string","example":"Av. Paulista, 1578 - Bela Vista, S칚o Paulo - SP, 01310-100","description":"Endere칞o completo do local (opcional)"}},"required":["degreesLatitude","degreesLongitude"]},"ContactMessageDto":{"type":"object","properties":{"displayName":{"type":"string","example":"Jo칚o Silva","description":"Nome de exibi칞칚o do contato"},"vcard":{"type":"string","description":"Conte칰do vCard do contato no formato padr칚o vCard 3.0","example":"BEGIN:VCARD\nVERSION:3.0\nFN:Jo칚o Silva\nTEL;TYPE=CELL:+5511999999999\nEMAIL:joao@example.com\nEND:VCARD"}},"required":["displayName","vcard"]},"ReactionMessageDto":{"type":"object","properties":{"text":{"type":"string","example":"仇벒잺","description":"Emoji da rea칞칚o (仇벒잺, 游녨, 游땍, 游땵, 游땩, 游똂, etc.)"},"key":{"type":"string","description":"ID da mensagem que receber치 a rea칞칚o (UUID do banco de dados, n칚o providerId)","example":"fa49178f-6595-40b9-a569-3d5c07925555"}},"required":["text","key"]},"CreateMessageDto":{"type":"object","properties":{"conversationId":{"type":"string","example":"fa49178f-6595-40b9-a569-3d5c07925555","description":"ID da conversa onde a mensagem ser치 enviada"},"type":{"type":"string","enum":["TEXT","IMAGE","VIDEO","AUDIO","DOCUMENT","LOCATION","CONTACT","STICKER","REACTION"],"description":"Tipo da mensagem: TEXT, IMAGE, VIDEO, AUDIO, DOCUMENT, STICKER, LOCATION, CONTACT, REACTION","default":"TEXT","example":"TEXT"},"content":{"type":"string","description":"Conte칰do de texto da mensagem ou legenda para m칤dias","example":"Ol치, como posso ajudar?"},"mediaId":{"type":"string","description":"丘멆잺 ID da m칤dia previamente enviada via POST /storage/upload. Obrigat칩rio para IMAGE, VIDEO, AUDIO, DOCUMENT e STICKER","example":"abc-123-def-456"},"replyToId":{"type":"string","description":"ID da mensagem que est치 sendo respondida (cria um Reply/Quote)","example":"fa49178f-6595-40b9-a569-3d5c07925555"},"signMessage":{"type":"boolean","description":"Se true, adiciona \"*Nome do Agente:*\\n\" no in칤cio da mensagem","default":false,"example":false},"location":{"description":"Dados de localiza칞칚o (obrigat칩rio quando type = LOCATION)","example":{"degreesLatitude":-23.55052,"degreesLongitude":-46.633308,"name":"Avenida Paulista","address":"Av. Paulista, 1578 - Bela Vista, S칚o Paulo - SP"},"allOf":[{"$ref":"#/components/schemas/LocationMessageDto"}]},"contact":{"description":"Dados do contato compartilhado (obrigat칩rio quando type = CONTACT)","example":{"displayName":"Jo칚o Silva","vcard":"BEGIN:VCARD\nVERSION:3.0\nFN:Jo칚o Silva\nTEL:+5511999999999\nEND:VCARD"},"allOf":[{"$ref":"#/components/schemas/ContactMessageDto"}]},"reaction":{"description":"丘멆잺 Dados da rea칞칚o (obrigat칩rio quando type = REACTION). Rea칞칫es N츾O s칚o salvas no banco, apenas enviadas ao WhatsApp.","example":{"text":"仇벒잺","key":"fa49178f-6595-40b9-a569-3d5c07925555"},"allOf":[{"$ref":"#/components/schemas/ReactionMessageDto"}]}},"required":["conversationId","type"]},"MessageSenderUser":{"type":"object","properties":{"id":{"type":"string","example":"fa4c178f-6595-40b9-a569-3d5c079288e5"},"name":{"type":"string","example":"Jo칚o Silva"},"avatarUrl":{"type":"string","example":"https://avatar.url/image.png"}},"required":["id","name"]},"MessageSenderContact":{"type":"object","properties":{"id":{"type":"string","example":"fa49178f-6595-40b9-a569-3d5c07921234"},"name":{"type":"string","example":"Luan Ara칰jo"},"profilePicUrl":{"type":"string","example":"https://avatar.url/image.png"}},"required":["id","name"]},"MessageMedia":{"type":"object","properties":{"id":{"type":"string","example":"fa49178f-6595-40b9-a569-3d5c07929999"},"fileName":{"type":"string","example":"image.png"},"mimeType":{"type":"string","example":"image/png"},"publicUrl":{"type":"string","example":"https://public.url/image.png"}},"required":["id","fileName","mimeType","publicUrl"]},"Message":{"type":"object","properties":{"id":{"type":"string","example":"fa49178f-6595-40b9-a569-3d5c0792aaaa"},"providerId":{"type":"string","example":"wamid.HBgL..."},"type":{"type":"string","enum":["TEXT","IMAGE","VIDEO","AUDIO","DOCUMENT","LOCATION","CONTACT","STICKER","REACTION"],"example":"TEXT"},"content":{"type":"string","example":"Ol치, como posso ajudar?"},"metadata":{"type":"object","example":{}},"conversationId":{"type":"string","example":"fa49178f-6595-40b9-a569-3d5c07925555"},"senderType":{"type":"string","enum":["USER","CONTACT","SYSTEM"],"example":"USER"},"senderUserId":{"type":"string","example":"fa4c178f-6595-40b9-a569-3d5c079288e5"},"senderUser":{"$ref":"#/components/schemas/MessageSenderUser"},"senderContactId":{"type":"string","example":"fa49178f-6595-40b9-a569-3d5c07921234"},"senderContact":{"$ref":"#/components/schemas/MessageSenderContact"},"mediaId":{"type":"string","example":"fa49178f-6595-40b9-a569-3d5c07929999"},"media":{"$ref":"#/components/schemas/MessageMedia"},"quotedMessage":{"$ref":"#/components/schemas/Message"},"read":{"type":"boolean","example":false},"createdAt":{"format":"date-time","type":"string","example":"2025-12-20T02:40:14.742Z"}},"required":["id","type","conversationId","senderType","read","createdAt"]},"BatchMessageItemDto":{"type":"object","properties":{"type":{"type":"string","enum":["TEXT","IMAGE","VIDEO","AUDIO","DOCUMENT","LOCATION","CONTACT","STICKER","REACTION"],"description":"Tipo da mensagem: TEXT, IMAGE, VIDEO, AUDIO, DOCUMENT, STICKER, LOCATION, CONTACT, REACTION","default":"TEXT","example":"TEXT"},"content":{"type":"string","description":"Conte칰do de texto da mensagem ou legenda para m칤dias","example":"Ol치, como posso ajudar?"},"mediaId":{"type":"string","description":"丘멆잺 ID da m칤dia previamente enviada via POST /storage/upload. Obrigat칩rio para IMAGE, VIDEO, AUDIO, DOCUMENT e STICKER","example":"abc-123-def-456"},"replyToId":{"type":"string","description":"ID da mensagem que est치 sendo respondida (cria um Reply/Quote)","example":"fa49178f-6595-40b9-a569-3d5c07925555"},"signMessage":{"type":"boolean","description":"Se true, adiciona \"*Nome do Agente:*\\n\" no in칤cio da mensagem","default":false,"example":false},"location":{"description":"Dados de localiza칞칚o (obrigat칩rio quando type = LOCATION)","example":{"degreesLatitude":-23.55052,"degreesLongitude":-46.633308,"name":"Avenida Paulista","address":"Av. Paulista, 1578 - Bela Vista, S칚o Paulo - SP"},"allOf":[{"$ref":"#/components/schemas/LocationMessageDto"}]},"contact":{"description":"Dados do contato compartilhado (obrigat칩rio quando type = CONTACT)","example":{"displayName":"Jo칚o Silva","vcard":"BEGIN:VCARD\nVERSION:3.0\nFN:Jo칚o Silva\nTEL:+5511999999999\nEND:VCARD"},"allOf":[{"$ref":"#/components/schemas/ContactMessageDto"}]},"reaction":{"description":"丘멆잺 Dados da rea칞칚o (obrigat칩rio quando type = REACTION). Rea칞칫es N츾O s칚o salvas no banco, apenas enviadas ao WhatsApp.","example":{"text":"仇벒잺","key":"fa49178f-6595-40b9-a569-3d5c07925555"},"allOf":[{"$ref":"#/components/schemas/ReactionMessageDto"}]}},"required":["type"]},"BatchMessageDto":{"type":"object","properties":{"conversationId":{"type":"string","example":"fa49178f-6595-40b9-a569-3d5c07925555","description":"ID da conversa onde todas as mensagens ser칚o enviadas"},"messages":{"description":"Array de mensagens a serem enviadas","example":[{"type":"IMAGE","mediaId":"33d19c8f-76e9-44b9-b27e-d7b4899518a9","content":"Foto 1"},{"type":"IMAGE","mediaId":"1ec3ca1c-c4a0-41e1-88a3-b3aa077e1f00","content":"Foto 2"}],"type":"array","items":{"$ref":"#/components/schemas/BatchMessageItemDto"}}},"required":["conversationId","messages"]},"ForwardMessageDto":{"type":"object","properties":{"messageId":{"type":"string","example":"abc-123-def-456","description":"ID da mensagem a ser encaminhada"},"targetConversationIds":{"example":["conv-1","conv-2"],"description":"IDs das conversas de destino (m치ximo 10)","maxItems":10,"type":"array","items":{"type":"string"}}},"required":["messageId","targetConversationIds"]},"ForwardBatchDto":{"type":"object","properties":{"messageIds":{"example":["msg-1","msg-2","msg-3"],"description":"IDs das mensagens a serem encaminhadas (m치ximo 50)","maxItems":50,"type":"array","items":{"type":"string"}},"targetConversationIds":{"example":["conv-x","conv-y"],"description":"IDs das conversas de destino (m치ximo 10)","maxItems":10,"type":"array","items":{"type":"string"}}},"required":["messageIds","targetConversationIds"]},"CreatePlanDto":{"type":"object","properties":{"name":{"type":"string","example":"Plano B치sico","description":"Nome do plano"},"type":{"type":"string","enum":["BASIC","MEDIUM"],"example":"BASIC","description":"Tipo do plano"},"description":{"type":"string","example":"Ideal para pequenas equipes","description":"Descri칞칚o do plano"},"maxUsers":{"type":"number","example":2,"description":"N칰mero m치ximo de usu치rios"},"maxChannels":{"type":"number","example":1,"description":"N칰mero m치ximo de canais"},"maxConversations":{"type":"number","example":500,"description":"N칰mero m치ximo de conversas por m칡s"},"stripePriceId":{"type":"string","example":"price_1234567890","description":"ID do pre칞o no Stripe (opcional, ser치 criado automaticamente se n칚o fornecido)"},"stripeProductId":{"type":"string","example":"prod_1234567890","description":"ID do produto no Stripe (opcional, ser치 criado automaticamente se n칚o fornecido)"},"priceMonthly":{"type":"number","example":4990,"description":"Pre칞o mensal em centavos (ex: 4990 = R$ 49,90)"}},"required":["name","type","maxUsers","maxChannels","maxConversations","priceMonthly"]},"SubscriptionPlan":{"type":"object","properties":{"id":{"type":"string","example":"fa4c178f-6595-40b9-a569-3d5c079288e5"},"name":{"type":"string","example":"Plano B치sico"},"type":{"type":"string","enum":["BASIC","MEDIUM"],"example":"BASIC"},"description":{"type":"string","example":"Ideal para pequenas equipes"},"maxUsers":{"type":"number","example":2},"maxChannels":{"type":"number","example":1},"maxConversations":{"type":"number","example":500},"stripePriceId":{"type":"string","example":"price_1234567890"},"stripeProductId":{"type":"string","example":"prod_1234567890"},"priceMonthly":{"type":"number","example":4990,"description":"Pre칞o mensal em centavos"},"active":{"type":"boolean","example":true},"createdAt":{"format":"date-time","type":"string","example":"2025-12-22T00:00:00.000Z"},"updatedAt":{"format":"date-time","type":"string","example":"2025-12-22T00:00:00.000Z"}},"required":["id","name","type","maxUsers","maxChannels","maxConversations","stripePriceId","stripeProductId","priceMonthly","active","createdAt","updatedAt"]},"UpdatePlanDto":{"type":"object","properties":{"name":{"type":"string","example":"Plano B치sico","description":"Nome do plano"},"type":{"type":"string","enum":["BASIC","MEDIUM"],"example":"BASIC","description":"Tipo do plano"},"description":{"type":"string","example":"Ideal para pequenas equipes","description":"Descri칞칚o do plano"},"maxUsers":{"type":"number","example":2,"description":"N칰mero m치ximo de usu치rios"},"maxChannels":{"type":"number","example":1,"description":"N칰mero m치ximo de canais"},"maxConversations":{"type":"number","example":500,"description":"N칰mero m치ximo de conversas por m칡s"},"stripePriceId":{"type":"string","example":"price_1234567890","description":"ID do pre칞o no Stripe (opcional, ser치 criado automaticamente se n칚o fornecido)"},"stripeProductId":{"type":"string","example":"prod_1234567890","description":"ID do produto no Stripe (opcional, ser치 criado automaticamente se n칚o fornecido)"},"priceMonthly":{"type":"number","example":4990,"description":"Pre칞o mensal em centavos (ex: 4990 = R$ 49,90)"}}},"CreateCheckoutSessionDto":{"type":"object","properties":{"planId":{"type":"string","example":"fa4c178f-6595-40b9-a569-3d5c079288e5","description":"ID do plano de assinatura"},"successUrl":{"type":"string","example":"https://app.exemplo.com/success","description":"URL de redirecionamento ap칩s pagamento bem-sucedido (OPCIONAL - padr칚o: APP_URL/subscription/success)"},"cancelUrl":{"type":"string","example":"https://app.exemplo.com/cancel","description":"URL de redirecionamento se o usu치rio cancelar o pagamento (OPCIONAL - padr칚o: APP_URL/subscription/cancel)"}},"required":["planId"]},"Subscription":{"type":"object","properties":{"id":{"type":"string","example":"fa4c178f-6595-40b9-a569-3d5c079288e5"},"tenantId":{"type":"string","example":"fa4c178f-6595-40b9-a569-3d5c079288e5"},"planId":{"type":"string","example":"fa4c178f-6595-40b9-a569-3d5c079288e5"},"plan":{"$ref":"#/components/schemas/SubscriptionPlan"},"status":{"type":"string","enum":["ACTIVE","CANCELED","PAST_DUE","TRIALING","INCOMPLETE","INCOMPLETE_EXPIRED","UNPAID"],"example":"ACTIVE"},"stripeCustomerId":{"type":"string","example":"cus_1234567890"},"stripeSubscriptionId":{"type":"string","example":"sub_1234567890"},"currentPeriodStart":{"format":"date-time","type":"string","example":"2025-12-22T00:00:00.000Z"},"currentPeriodEnd":{"format":"date-time","type":"string","example":"2026-01-22T00:00:00.000Z"},"cancelAtPeriodEnd":{"type":"boolean","example":false},"trialEnd":{"format":"date-time","type":"string","example":"2026-01-05T00:00:00.000Z"},"createdAt":{"format":"date-time","type":"string","example":"2025-12-22T00:00:00.000Z"},"updatedAt":{"format":"date-time","type":"string","example":"2025-12-22T00:00:00.000Z"}},"required":["id","tenantId","planId","status","cancelAtPeriodEnd","createdAt","updatedAt"]}}}}